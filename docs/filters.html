<!DOCTYPE html>

<html>
<head>
  <title>Default Filters</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="default-filters">Default Filters</h1>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2 id="filter">filter</h2>
<p>Filters an array by the given filter function(s), may provide a function, an
array, or an object with filtering functions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>chip.filter <span class="hljs-string">'filter'</span>, <span class="hljs-function"><span class="hljs-params">(value, filterFunc)</span> -&gt;</span>
  <span class="hljs-keyword">return</span> [] <span class="hljs-keyword">unless</span> Array.isArray value
  <span class="hljs-keyword">return</span> value <span class="hljs-keyword">unless</span> filterFunc
  <span class="hljs-keyword">if</span> <span class="hljs-keyword">typeof</span> filterFunc <span class="hljs-keyword">is</span> <span class="hljs-string">'function'</span>
    value.filter(filterFunc, <span class="hljs-keyword">this</span>)
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> Array.isArray filterFunc
    <span class="hljs-keyword">for</span> func <span class="hljs-keyword">in</span> filterFunc
      value = value.filter(func, <span class="hljs-keyword">this</span>)
    value
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">typeof</span> filterFunc <span class="hljs-keyword">is</span> <span class="hljs-string">'object'</span>
    <span class="hljs-keyword">for</span> own key, func <span class="hljs-keyword">of</span> filterFunc
      <span class="hljs-keyword">if</span> <span class="hljs-keyword">typeof</span> func <span class="hljs-keyword">is</span> <span class="hljs-string">'function'</span>
        value = value.filter(func, <span class="hljs-keyword">this</span>)
    value</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h2 id="map">map</h2>
<p>Adds a filter to map an array or value by the given mapping function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>chip.filter <span class="hljs-string">'map'</span>, <span class="hljs-function"><span class="hljs-params">(value, mapFunc)</span> -&gt;</span>
  <span class="hljs-keyword">return</span> value <span class="hljs-keyword">unless</span> value? <span class="hljs-keyword">and</span> mapFunc
  <span class="hljs-keyword">if</span> Array.isArray value
    value.map(mapFunc, <span class="hljs-keyword">this</span>)
  <span class="hljs-keyword">else</span>
    mapFunc.call(<span class="hljs-keyword">this</span>, value)</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h2 id="reduce">reduce</h2>
<p>Adds a filter to reduce an array or value by the given reduce function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>chip.filter <span class="hljs-string">'reduce'</span>, <span class="hljs-function"><span class="hljs-params">(value, reduceFunc, initialValue)</span> -&gt;</span>
  <span class="hljs-keyword">return</span> value <span class="hljs-keyword">unless</span> value? <span class="hljs-keyword">and</span> reduceFunc
  <span class="hljs-keyword">if</span> Array.isArray value
    <span class="hljs-keyword">if</span> arguments.length <span class="hljs-keyword">is</span> <span class="hljs-number">3</span> <span class="hljs-keyword">then</span> value.reduce(reduceFunc, initialValue) <span class="hljs-keyword">else</span> value.reduce(reduceFunc)
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> arguments.length <span class="hljs-keyword">is</span> <span class="hljs-number">3</span>
    reduceFunc(initialValue, value)</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h2 id="reduce">reduce</h2>
<p>Adds a filter to reduce an array or value by the given reduce function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>chip.filter <span class="hljs-string">'slice'</span>, <span class="hljs-function"><span class="hljs-params">(value, index, endIndex)</span> -&gt;</span>
  <span class="hljs-keyword">if</span> Array.isArray value
    value.slice(index, endIndex)
  <span class="hljs-keyword">else</span>
    value</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h2 id="date">date</h2>
<p>Adds a filter to format dates and strings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>chip.filter <span class="hljs-string">'date'</span>, <span class="hljs-function"><span class="hljs-params">(value)</span> -&gt;</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">''</span> <span class="hljs-keyword">unless</span> value
  <span class="hljs-keyword">unless</span> value <span class="hljs-keyword">instanceof</span> Date
    value = <span class="hljs-keyword">new</span> Date(value)
  <span class="hljs-keyword">return</span> <span class="hljs-string">''</span> <span class="hljs-keyword">if</span> isNaN value.getTime()
  value.toLocaleString()</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <h2 id="log">log</h2>
<p>Adds a filter to log the value of the expression, useful for debugging</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>chip.filter <span class="hljs-string">'log'</span>, <span class="hljs-function"><span class="hljs-params">(value, prefix = <span class="hljs-string">'Log'</span>)</span> -&gt;</span>
  <span class="hljs-built_in">console</span>.log prefix + <span class="hljs-string">':'</span>, value
  <span class="hljs-keyword">return</span> value</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h2 id="limit">limit</h2>
<p>Adds a filter to limit the length of an array or string</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>chip.filter <span class="hljs-string">'limit'</span>, <span class="hljs-function"><span class="hljs-params">(value, limit)</span> -&gt;</span>
  <span class="hljs-keyword">if</span> value <span class="hljs-keyword">and</span> <span class="hljs-keyword">typeof</span> value.slice <span class="hljs-keyword">is</span> <span class="hljs-string">'function'</span>
    <span class="hljs-keyword">if</span> limit &lt; <span class="hljs-number">0</span>
      value.slice limit
    <span class="hljs-keyword">else</span>
      value.slice <span class="hljs-number">0</span>, limit
  <span class="hljs-keyword">else</span>
    value</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h2 id="sort">sort</h2>
<p>Sorts an array given a field name or sort function, and a direction</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>chip.filter <span class="hljs-string">'sort'</span>, <span class="hljs-function"><span class="hljs-params">(value, sortFunc, dir)</span> -&gt;</span>
  <span class="hljs-keyword">return</span> value <span class="hljs-keyword">unless</span> sortFunc <span class="hljs-keyword">and</span> Array.isArray value
  dir = <span class="hljs-keyword">if</span> dir <span class="hljs-keyword">is</span> <span class="hljs-string">'desc'</span> <span class="hljs-keyword">then</span> -<span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-number">1</span>
  <span class="hljs-keyword">if</span> <span class="hljs-keyword">typeof</span> sortFunc <span class="hljs-keyword">is</span> <span class="hljs-string">'string'</span>
    [prop, dir2] = sortFunc.split(<span class="hljs-string">':'</span>)
    dir2 = <span class="hljs-keyword">if</span> dir2 <span class="hljs-keyword">is</span> <span class="hljs-string">'desc'</span> <span class="hljs-keyword">then</span> -<span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-number">1</span>
    dir = dir <span class="hljs-keyword">or</span> dir2
<span class="hljs-function">    <span class="hljs-title">sortFunc</span> = <span class="hljs-params">(a, b)</span> -&gt;</span>
      <span class="hljs-keyword">return</span> dir <span class="hljs-keyword">if</span> a[prop] &gt; b[prop]
      <span class="hljs-keyword">return</span> -dir <span class="hljs-keyword">if</span> a[prop] &lt; b[prop]
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> dir <span class="hljs-keyword">is</span> -<span class="hljs-number">1</span>
    origFunc = sortFunc
<span class="hljs-function">    <span class="hljs-title">sortFunc</span> = <span class="hljs-params">(a, b)</span> -&gt;</span> -origFunc(a, b)

  value.slice().sort(sortFunc)</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <h2 id="addquery">addQuery</h2>
<p>Takes the input URL and adds (or replaces) the field in the query</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>chip.filter <span class="hljs-string">'addQuery'</span>, <span class="hljs-function"><span class="hljs-params">(value, queryField, queryValue)</span> -&gt;</span>
  url = value <span class="hljs-keyword">or</span> location.href
  [url, query] = url.split(<span class="hljs-string">'?'</span>)
  addedQuery = <span class="hljs-string">''</span>
  <span class="hljs-keyword">if</span> queryValue?
    addedQuery = queryField + <span class="hljs-string">'='</span> + encodeURIComponent(queryValue)

  <span class="hljs-keyword">if</span> query
    expr = <span class="hljs-keyword">new</span> RegExp(<span class="hljs-string">'\\b'</span> + queryField + <span class="hljs-string">'=[^&amp;]*'</span>)
    <span class="hljs-keyword">if</span> expr.test query
      query = query.replace(expr, addedQuery)
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> addedQuery
      query += <span class="hljs-string">'&amp;'</span> + addedQuery
  <span class="hljs-keyword">else</span>
    query = addedQuery
  url = [url, query].join(<span class="hljs-string">'?'</span>) <span class="hljs-keyword">if</span> query
  <span class="hljs-keyword">return</span> url</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <h2 id="paginate">paginate</h2>
<p>Paginates an array by pageSize with a defaultPage and optional name for the data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>chip.filter <span class="hljs-string">'paginate'</span>, <span class="hljs-function"><span class="hljs-params">(value, pageSize, defaultPage = <span class="hljs-number">1</span>, name = <span class="hljs-string">'pagination'</span>)</span> -&gt;</span>
  <span class="hljs-keyword">unless</span> pageSize <span class="hljs-keyword">and</span> Array.isArray value
    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.app.rootController[name]</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>triggers that pagination has run so view that is higher up in the page can refresh</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.trigger(<span class="hljs-string">'paginated'</span>)
    value
  <span class="hljs-keyword">else</span>
    pageCount = Math.ceil value.length / pageSize</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>-1 would be the last page, -2 would be second to last page</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> defaultPage &lt; <span class="hljs-number">0</span>
      defaultPage = pageCount + defaultPage + <span class="hljs-number">1</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">typeof</span> defaultPage <span class="hljs-keyword">is</span> <span class="hljs-string">'function'</span>
      defaultPage = defaultPage(value, pageSize, pageCount) <span class="hljs-keyword">or</span> <span class="hljs-number">1</span>

    currentPage = Math.min pageCount, Math.max(<span class="hljs-number">1</span>, <span class="hljs-keyword">this</span>.query?.page <span class="hljs-keyword">or</span> defaultPage)
    index = currentPage - <span class="hljs-number">1</span>
    begin = index * pageSize
    end = Math.min begin + pageSize, value.length

    <span class="hljs-keyword">this</span>.app.rootController[name] = {} <span class="hljs-keyword">unless</span> <span class="hljs-keyword">this</span>.app.rootController[name]
    pagination = <span class="hljs-keyword">this</span>.app.rootController[name]
    pagination.array = value
    pagination.page = value.slice(begin, end)
    pagination.pageSize = pageSize
    pagination.pageCount = pageCount
    pagination.defaultPage = defaultPage
    pagination.currentPage = currentPage
    pagination.beginIndex = begin
    pagination.endIndex = end</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>triggers that pagination has run so view that is higher up in the page can refresh</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.trigger(<span class="hljs-string">'paginated'</span>)

    pagination.page</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <h2 id="escape">escape</h2>
<p>HTML escapes content. For use with other HTML-adding filters such as autolink.</p>
<p><strong>Example:</strong></p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">bind-html</span>=<span class="hljs-value">"tweet.content | escape | autolink:true"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
<p><em>Result:</em></p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span>&gt;</span>Check out <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"https://github.com/teamsnap/chip"</span> <span class="hljs-attribute">target</span>=<span class="hljs-value">"_blank"</span>&gt;</span>https://github.com/teamsnap/chip<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>!<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>div = <span class="hljs-literal">null</span>
chip.filter <span class="hljs-string">'escape'</span>, <span class="hljs-function"><span class="hljs-params">(value)</span> -&gt;</span>
  div = $(<span class="hljs-string">'&lt;div&gt;&lt;/div&gt;'</span>) <span class="hljs-keyword">unless</span> div
  div.text(value <span class="hljs-keyword">or</span> <span class="hljs-string">''</span>).text()</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <h2 id="p">p</h2>
<p>HTML escapes content wrapping paragraphs in <p> tags.</p>
<p><strong>Example:</strong></p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">bind-html</span>=<span class="hljs-value">"tweet.content | p | autolink:true"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
<p><em>Result:</em></p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>Check out <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"https://github.com/teamsnap/chip"</span> <span class="hljs-attribute">target</span>=<span class="hljs-value">"_blank"</span>&gt;</span>https://github.com/teamsnap/chip<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>!<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>It's great<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>chip.filter <span class="hljs-string">'p'</span>, <span class="hljs-function"><span class="hljs-params">(value)</span> -&gt;</span>
  div = $(<span class="hljs-string">'&lt;div&gt;&lt;/div&gt;'</span>) <span class="hljs-keyword">unless</span> div
  lines = (value <span class="hljs-keyword">or</span> <span class="hljs-string">''</span>).split(<span class="hljs-regexp">/\r?\n/</span>)
  escaped = lines.map (line) -&gt; div.text(line).text() <span class="hljs-keyword">or</span> <span class="hljs-string">'&lt;br&gt;'</span>
  <span class="hljs-string">'&lt;p&gt;'</span> + escaped.join(<span class="hljs-string">'&lt;/p&gt;&lt;p&gt;'</span>) + <span class="hljs-string">'&lt;/p&gt;'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <h2 id="br">br</h2>
<p>HTML escapes content adding <br> tags in place of newlines characters.</p>
<p><strong>Example:</strong></p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">bind-html</span>=<span class="hljs-value">"tweet.content | br | autolink:true"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
<p><em>Result:</em></p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span>&gt;</span>Check out <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"https://github.com/teamsnap/chip"</span> <span class="hljs-attribute">target</span>=<span class="hljs-value">"_blank"</span>&gt;</span>https://github.com/teamsnap/chip<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>!<span class="hljs-tag">&lt;<span class="hljs-title">br</span>&gt;</span>
It's great<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>chip.filter <span class="hljs-string">'br'</span>, <span class="hljs-function"><span class="hljs-params">(value)</span> -&gt;</span>
  div = $(<span class="hljs-string">'&lt;div&gt;&lt;/div&gt;'</span>) <span class="hljs-keyword">unless</span> div
  lines = (value <span class="hljs-keyword">or</span> <span class="hljs-string">''</span>).split(<span class="hljs-regexp">/\r?\n/</span>)
  escaped = lines.map (line) -&gt; div.text(line).text()
  escaped.join(<span class="hljs-string">'&lt;br&gt;'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <h2 id="newline">newline</h2>
<p>HTML escapes content adding <p> tags at doulbe newlines and <br> tags in place of single newline characters.</p>
<p><strong>Example:</strong></p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">bind-html</span>=<span class="hljs-value">"tweet.content | newline | autolink:true"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
<p><em>Result:</em></p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>Check out <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"https://github.com/teamsnap/chip"</span> <span class="hljs-attribute">target</span>=<span class="hljs-value">"_blank"</span>&gt;</span>https://github.com/teamsnap/chip<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>!<span class="hljs-tag">&lt;<span class="hljs-title">br</span>&gt;</span>
It's great<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>chip.filter <span class="hljs-string">'newline'</span>, <span class="hljs-function"><span class="hljs-params">(value)</span> -&gt;</span>
  div = $(<span class="hljs-string">'&lt;div&gt;&lt;/div&gt;'</span>) <span class="hljs-keyword">unless</span> div
  paragraphs = (value <span class="hljs-keyword">or</span> <span class="hljs-string">''</span>).split(<span class="hljs-regexp">/\r?\n\s*\r?\n/</span>)
  escaped = paragraphs.map (paragraph) -&gt;
    lines = paragraph.split(<span class="hljs-regexp">/\r?\n/</span>)
    escaped = lines.map (line) -&gt; div.text(line).text()
    escaped.join(<span class="hljs-string">'&lt;br&gt;'</span>)
  <span class="hljs-string">'&lt;p&gt;'</span> + escaped.join(<span class="hljs-string">'&lt;/p&gt;&lt;p&gt;'</span>) + <span class="hljs-string">'&lt;/p&gt;'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <h2 id="autolink">autolink</h2>
<p>Adds automatic links to escaped content (be sure to escape user content). Can be used on existing HTML content as it
will skip URLs within HTML tags. Passing true in the second parameter will set the target to <code>_blank</code>.</p>
<p><strong>Example:</strong></p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">bind-html</span>=<span class="hljs-value">"tweet.content | escape | autolink:true"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
<p><em>Result:</em></p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span>&gt;</span>Check out <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"https://github.com/teamsnap/chip"</span> <span class="hljs-attribute">target</span>=<span class="hljs-value">"_blank"</span>&gt;</span>https://github.com/teamsnap/chip<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>!<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>urlExp = <span class="hljs-regexp">/(^|\s|\()((?:https?|ftp):\/\/[\-A-Z0-9+\u0026@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~(_|])/gi</span>
chip.filter <span class="hljs-string">'autolink'</span>, <span class="hljs-function"><span class="hljs-params">(value, target)</span> -&gt;</span>
  target = <span class="hljs-keyword">if</span> target <span class="hljs-keyword">then</span> <span class="hljs-string">' target="_blank"'</span> <span class="hljs-keyword">else</span> <span class="hljs-string">''</span>
  (<span class="hljs-string">''</span> + value).replace <span class="hljs-regexp">/&lt;[^&gt;]+&gt;|[^&lt;]+/g</span>, <span class="hljs-function"><span class="hljs-params">(match)</span> -&gt;</span>
    <span class="hljs-keyword">return</span> match <span class="hljs-keyword">if</span> match.charAt(<span class="hljs-number">0</span>) <span class="hljs-keyword">is</span> <span class="hljs-string">'&lt;'</span>
    match.replace(urlExp, <span class="hljs-string">'$1&lt;a href="$2"'</span> + target + <span class="hljs-string">'&gt;$2&lt;/a&gt;'</span>)


chip.filter <span class="hljs-string">'int'</span>, <span class="hljs-function"><span class="hljs-params">(value)</span> -&gt;</span>
  value = parseInt value
  <span class="hljs-keyword">if</span> isNaN(value) <span class="hljs-keyword">then</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">else</span> value


chip.filter <span class="hljs-string">'float'</span>, <span class="hljs-function"><span class="hljs-params">(value)</span> -&gt;</span>
  value = parseFloat value
  <span class="hljs-keyword">if</span> isNaN(value) <span class="hljs-keyword">then</span> <span class="hljs-literal">null</span> <span class="hljs-keyword">else</span> value


chip.filter <span class="hljs-string">'bool'</span>, <span class="hljs-function"><span class="hljs-params">(value)</span> -&gt;</span>
  value <span class="hljs-keyword">and</span> value <span class="hljs-keyword">isnt</span> <span class="hljs-string">'0'</span> <span class="hljs-keyword">and</span> value <span class="hljs-keyword">isnt</span> <span class="hljs-string">'false'</span></pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
