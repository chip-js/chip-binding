<!DOCTYPE html>

<html>
<head>
  <title>Chip Filter</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="chip-filter">Chip Filter</h1>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>A Filter is stored to process the value of an expression in <code>controller.watch</code> (and thus most bindings which use
<code>controller.watch</code>). This alters the value of what comes in with a function that returns a new value. Filters are
added by using a single pipe character (<code>|</code>) followed by the name of the filter. Multiple filters can be used by
chaining pipes with filter names. Filters may also have arguments passed to them by using the colon to separate
arguments from the filter name. The signature of a filter should be <code>function (controller, value, args...)</code> where
args are extra parameters passed into the filter after colons.</p>
<p><em>Example:</em></p>
<pre><code class="lang-js">chip.filter(<span class="hljs-string">'uppercase'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(controller, value)</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value != <span class="hljs-string">'string'</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
  <span class="hljs-keyword">return</span> value.toUppercase()
})

chip.filter(<span class="hljs-string">'replace'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(controller, value, replace, with)</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value != <span class="hljs-string">'string'</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
  <span class="hljs-keyword">return</span> value.replace(replace, <span class="hljs-keyword">with</span>)
})
<span class="hljs-string">``</span><span class="hljs-string">`xml
&lt;h1 bind-text="title | uppercase | replace:'LETTER':'NUMBER'"&gt;&lt;/h1&gt;</span>
</code></pre>
<p><em>Result:</em></p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>GETTING TO KNOW ALL ABOUT THE NUMBER A<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>
</code></pre>
<p>A <code>valueFilter</code> is like a filter but used specifically with the <code>value</code> binding since it is a two-way binding. When
the value of the element is changed a <code>valueFilter</code> can adjust the value from a string to the correct value type for
the controller expression. The signature for a <code>valueFilter</code> includes the current value of the expression
before the optional arguments (if any). This allows dates to be adjusted and possibley other uses.</p>
<p><em>Example:</em></p>
<pre><code class="lang-js">chip.filter(<span class="hljs-string">'numeric'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(controller, value)</span> </span>{
  <span class="hljs-comment">// value coming from the controller expression, to be set on the element</span>
  <span class="hljs-keyword">if</span> (value == <span class="hljs-literal">null</span> || <span class="hljs-built_in">isNaN</span>(value)) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
  <span class="hljs-keyword">return</span> value
})

chip.filter(<span class="hljs-string">'date-hour'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(controller, value)</span> </span>{
  <span class="hljs-comment">// value coming from the controller expression, to be set on the element</span>
  <span class="hljs-keyword">if</span> ( !(currentValue <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span>) ) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
  <span class="hljs-keyword">var</span> hours = value.getHours()
  <span class="hljs-keyword">if</span> (hours &gt;= <span class="hljs-number">12</span>) hours -= <span class="hljs-number">12</span>
  <span class="hljs-keyword">if</span> (hours == <span class="hljs-number">0</span>) hours = <span class="hljs-number">12</span>
  <span class="hljs-keyword">return</span> hours
})
<span class="hljs-string">``</span><span class="hljs-string">`xml
&lt;label&gt;Number Attending:&lt;/label&gt;
&lt;input size="4" bind-value="event.attendeeCount | numeric"&gt;
&lt;label&gt;Time:&lt;/label&gt;
&lt;input size="2" bind-value="event.date | date-hour"&gt; :
&lt;input size="2" bind-value="event.date | date-minute"&gt;
&lt;select bind-value="event.date | date-ampm"&gt;
  &lt;option&gt;AM&lt;/option&gt;
  &lt;option&gt;PM&lt;/option&gt;
&lt;/select&gt;</span>
</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Filter</span></span>
  <span class="hljs-attribute">constructor</span>: <span class="hljs-function"><span class="hljs-params">(<span class="hljs-property">@name</span>, <span class="hljs-property">@filter</span>)</span> -&gt;</span>

  <span class="hljs-property">@filters</span>: {}

  <span class="hljs-property">@addFilter</span>: <span class="hljs-function"><span class="hljs-params">(name, filter)</span> -&gt;</span>
    <span class="hljs-property">@filters</span>[name] = filter <span class="hljs-keyword">if</span> filter?
    <span class="hljs-keyword">this</span>


  <span class="hljs-property">@getFilter</span>: <span class="hljs-function"><span class="hljs-params">(name)</span> -&gt;</span>
    <span class="hljs-property">@filters</span>[name]</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
